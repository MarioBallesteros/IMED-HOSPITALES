<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" type="text/css" href="css/css.css">
	<link rel="stylesheet" type="text/css" href="css/reservaCita.css">
	<link rel="stylesheet" type="text/css" href="css/externo/bootstrap.css">


	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Josefin+Sans:ital,wght@1,400;1,500;1,700&display=swap" rel="stylesheet">
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Cardo&display=swap" rel="stylesheet">
	<link rel="stylesheet" href="https://fonts.sandbox.google.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />

	<title>HOSPITAL - B.G</title>
</head>
<body>
	
	<div class="cabecera">
		<img class="upperlogo" width="300" height="150" src="imagenes/nobg-logo.png">
		<div class="nav">
		<ul>
			<li class="menu"><a href="index2.html">MENU<span class="material-symbols-outlined">menu_open</span></a> </li>
		</ul>
		</div>
	</div>
	
	<div class="contenedorCentral">
            <div class="page-section">
                <div class="container">
                  <div class="col-md-4">
                  <div class="well">
                  <form class="main-form">
                    <h1 class="text-center wow fadeInUp">Reserva Una Cita Con Uno de Nuestros Especialistas</h1>
                    <div class="row mt-5 ">
                      <div class="col-12 col-sm-6 py-2 wow fadeInLeft">
                        <h5>Especialidad:</h5>
                        <select name="departement" id="especialidad" class="custom-select">
                          <option value="general">Especialidad:</option>
                          <option value="cardiology">Cardiology</option>
                          <option value="dental">Dental</option>
                          <option value="neurology">Neurology</option>
                          <option value="orthopaedics">Orthopaedics</option>
                        </select>
                      </div>
                      <div class="col-12 col-sm-6 py-2 wow fadeInRight">
                        <h5>Especialista:</h5>
                        <select name="departement" id="departement" class="custom-select">
                          <option value="general">Especialista:</option>
                          <option value="cardiology">Cardiology</option>
                          <option value="dental">Dental</option>
                          <option value="neurology">Neurology</option>
                          <option value="orthopaedics">Orthopaedics</option>
                        </select>
                      </div>
                      <div class="col-12 col-sm-6 py-2 wow fadeInLeft" data-wow-delay="300ms">
                        <h5>Fecha Cita:</h5>
                        <input type="date" class="form-control">
                      </div>
                      <div class="col-12 col-sm-6 py-2 wow fadeInRight" data-wow-delay="300ms">
                        <h5>Horas Disponibles:</h5>
                        <select name="departement" id="departement" class="custom-select">
                          <option value="general">General Health</option>
                          <option value="cardiology">Cardiology</option>
                          <option value="dental">Dental</option>
                          <option value="neurology">Neurology</option>
                          <option value="orthopaedics">Orthopaedics</option>
                        </select>
                      </div>
                      <br><br><br><br>
                      <div class="col-12 py-2 wow fadeInUp" data-wow-delay="300ms">
                        <h5>Observaciones con relación a la cita...</h5>
                        <textarea name="message" id="message" class="form-control" rows="6" placeholder="Observaciones con relación a la cita..."></textarea>
                      </div>
                    </div>
                    <div class="checkbox">
                      <label><input type="checkbox" required >He leido y acepto los Terminos &amp; condiciones</label>
                  </div>
                    <button type="submit" class="btn btn-primary mt-3 wow zoomIn">Submit Request</button>
                    <br>
                    <span class="help-block">Toda cancelación de cita fuera de plazo tendrá una sanción de 30 €</span>

                  </form>
                </div>
              </div>
            </div>
          </div> <!-- .page-section -->

</div>

	<footer class="footer-distributed">

			<div class="footer-left">

				<h3>Company<span>logo</span></h3>

				<p class="footer-links">
					<a href="#" class="link-1">Home</a>
					
					<a href="#">Blog</a>
				
					<a href="#">Pricing</a>
				
					<a href="#">About</a>
					
					<a href="#">Faq</a>
					
					<a href="#">Contact</a>
				</p>

				<p class="footer-company-name">Company Name © 2015</p>
			</div>

			<div class="footer-center">

				<div>
					<i class="fa fa-map-marker"></i>
					<p><span>444 S. Cedros Ave</span> Solana Beach, California</p>
				</div>

				<div>
					<i class="fa fa-phone"></i>
					<p>+1.555.555.5555</p>
				</div>

				<div>
					<i class="fa fa-envelope"></i>
					<p><a href="mailto:support@company.com">support@company.com</a></p>
				</div>

			</div>

			<div class="footer-right">

				<p class="footer-company-about">
					<span>About the company</span>
					Lorem ipsum dolor sit amet, consectateur adispicing elit. Fusce euismod convallis velit, eu auctor lacus vehicula sit amet.
				</p>

				<div class="footer-icons">

					<a href="#"><i class="fa fa-facebook"></i></a>
					<a href="#"><i class="fa fa-twitter"></i></a>
					<a href="#"><i class="fa fa-linkedin"></i></a>
					<a href="#"><i class="fa fa-github"></i></a>

				</div>

			</div>
        

		</footer>
</body>
<script type="module">
	import { initializeApp } from "https://www.gstatic.com/firebasejs/9.7.0/firebase-app.js";
	import { getFirestore,collection,addDoc,query,where,getDocs } from "https://www.gstatic.com/firebasejs/9.7.0/firebase-firestore.js"
	import { getAuth,createUserWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/9.7.0/firebase-auth.js";
	 // Your web app's Firebase configuration
	 // For Firebase JS SDK v7.20.0 and later, measurementId is optional
	 const firebaseConfig = {
	   apiKey: "AIzaSyCp6Q_j8massOsIuXXWhlMp1yuig5ebmjE",
	   authDomain: "hospital-5f67e.firebaseapp.com",
	   projectId: "hospital-5f67e",
	   storageBucket: "hospital-5f67e.appspot.com",
	   messagingSenderId: "1004398381726",
	   appId: "1:1004398381726:web:e7c0f93f111a0d93ae898f",
	   measurementId: "G-KGZ9K8SRR2"
	 };

	 const app = initializeApp(firebaseConfig);
	 const db=getFirestore();
	 const auth=getAuth();
	const fors=document.getElementById('form');
	fors.addEventListener('submit',async (e)  => {
		e.preventDefault()
	   const Nom = fors['nombre'];
	   const Apel = fors['apellidos'];
	   const dir = fors['direccion'];
	   const pob = fors['poblacion'];
	   const pr = fors['provincia'];
	   const pa = fors['pais'];
	   const email = fors['correo'];
	   const tel = fors['telefono'];
	   const usu = fors['usuario'];
	   const especial = fors['especialidad'];
		var Nombre= Nom.value;
		var Apellidos= Apel.value;
		var direccion= dir.value;
		var poblacion= pob.value;
		var provincia= pr.value;
		var pais= pa.value;
		var correo= email.value;
		var telefono= tel.value;
		var usuario= usu.value;
		var especialidad=especial.value;
		var  contra=generarContra();
		console.log(Nombre);
		console.log(Apellidos);
		console.log(direccion);
		console.log(poblacion);
		console.log(provincia);
		console.log(pais);
		console.log(correo);
		console.log(telefono);
		console.log(usuario);
		console.log(contra);
		console.log(especialidad);
		addDoc(collection(db,'Doctores'),{Nombre, Apellidos, direccion, poblacion,provincia, pais,correo,telefono,usuario,contra,especialidad})
		createUserWithEmailAndPassword(auth, correo,contra)
			.then((userCredential) => {
				// Signed in
				const user = userCredential.user;
				// ...
									
				})
			.catch((error) => {
				const errorCode = error.code;
				const errorMessage = error.message;
				// ..
				});
	})

function generarContra(){
	var chars = "abcdefghijklmnopqrstubwsyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890!@#$%&?";
  	var password = '';
  	var long=Math.floor(Math.random()*(13-8)+8);
    for(var i=0; i<long; i++){
      password+=chars.charAt(Math.floor(Math.random()*chars.length));
    }
	return password;
}
const espe=document.getElementById("especialidad");
window.addEventListener('DOMContentLoaded',async ()=>{
	let opcion="";
	const qu = query(collection(db,"Especialidades"));
	const querySnapshot = await getDocs(qu);
	querySnapshot.forEach((doc)=>{
		const dat =doc.data();
		opcion+=`<option>${dat.nombre}</option>`
	})
	espe.innerHTML=opcion;
})
</script>
</html>
