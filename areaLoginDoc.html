<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/2.2.0/anime.min.js"></script>

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" type="text/css" href="css/cssLoginDoc.css">
	<link rel="stylesheet" type="text/css" href="css/css.css">

	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Josefin+Sans:ital,wght@1,400;1,500;1,700&display=swap" rel="stylesheet">
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Cardo&display=swap" rel="stylesheet">
	<link rel="stylesheet" href="https://fonts.sandbox.google.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />

	<title>HOSPITAL - B.G</title>
</head>
<body>
	<div class="cabecera">
		<img class="upperlogo" width="300" height="150" src="imagenes/nobg-logo.png">
		<div class="nav">
		<ul>
			<li class="menu"><a href="index2.html">VOLVER⠀<span class="material-symbols-outlined">arrow_back</span></a></li>
		</ul>
		</div>
	</div>
	<div class="page">
		<br><br><br>
		<div class="container">
		  <div class="left">
			<div class="login">Hola Dr.</div>
			<div class="eula">Le recordamos que esta es un área a la cual solo tiene acceso el personal de este centro.</div>
		  </div>
		  <div class="right">
			<svg viewBox="0 0 320 300">
			  <defs>
				<linearGradient
								inkscape:collect="always"
								id="linearGradient"
								x1="13"
								y1="193.49992"
								x2="307"
								y2="193.49992"
								gradientUnits="userSpaceOnUse">
				  <stop
						style="stop-color:#ff00ff;"
						offset="0"
						id="stop876" />
				  <stop
						style="stop-color:#ff0000;"
						offset="1"
						id="stop878" />
				</linearGradient>
			  </defs>
			  <path d="m 40,120.00016 239.99984,-3.2e-4 c 0,0 24.99263,0.79932 25.00016,35.00016 0.008,34.20084 -25.00016,35 -25.00016,35 h -239.99984 c 0,-0.0205 -25,4.01348 -25,38.5 0,34.48652 25,38.5 25,38.5 h 215 c 0,0 20,-0.99604 20,-25 0,-24.00396 -20,-25 -20,-25 h -190 c 0,0 -20,1.71033 -20,25 0,24.00396 20,25 20,25 h 168.57143" />
			</svg>
			<div class="form" id="form">
			<form method="post" id="form1">
			  <label for="usuario">Usuario:</label>
			  <input type="text" id="usuario" name="usuario">
			  <label for="contra">Contraseña:</label>
			  <input type="password" id="contra" name="contra">
			  <input type="submit" id="submit" value="Submit">
			</div>
			</form>
		  </div>
		</div>
		<footer>
			<p>
				HOSPITALES  <i class="fa fa-heart"></i> 
				<a target="_blank">BALLESTEROS GRUEIRO </a>
				- Curar es lo 
				<a target="_blank">nuestro</a>.
			</p>
		</footer>
	  </div>

</body>
<script>
	var current = null;
	document.querySelector('#usuario').addEventListener('focus', function(e) {
	  if (current) current.pause();
	  current = anime({
		targets: 'path',
		strokeDashoffset: {
		  value: 0,
		  duration: 700,
		  easing: 'easeOutQuart'
		},
		strokeDasharray: {
		  value: '240 1386',
		  duration: 700,
		  easing: 'easeOutQuart'
		}
	  });
	});
	document.querySelector('#contra').addEventListener('focus', function(e) {
	  if (current) current.pause();
	  current = anime({
		targets: 'path',
		strokeDashoffset: {
		  value: -336,
		  duration: 700,
		  easing: 'easeOutQuart'
		},
		strokeDasharray: {
		  value: '240 1386',
		  duration: 700,
		  easing: 'easeOutQuart'
		}
	  });
	});
	document.querySelector('#submit').addEventListener('focus', function(e) {
	  if (current) current.pause();
	  current = anime({
		targets: 'path',
		strokeDashoffset: {
		  value: -730,
		  duration: 700,
		  easing: 'easeOutQuart'
		},
		strokeDasharray: {
		  value: '530 1386',
		  duration: 700,
		  easing: 'easeOutQuart'
		}
	  });
	});
	</script>
	<script type="module">
		import { initializeApp } from "https://www.gstatic.com/firebasejs/9.7.0/firebase-app.js";
	
		 import { getFirestore} from "https://www.gstatic.com/firebasejs/9.7.0/firebase-firestore.js"
		 import { query, collection, getDocs, where } from "https://www.gstatic.com/firebasejs/9.7.0/firebase-firestore.js";
		import { getAuth,signInWithEmailAndPassword,signOut  } from "https://www.gstatic.com/firebasejs/9.7.0/firebase-auth.js";
		
		// Your web app's Firebase configuration
		// For Firebase JS SDK v7.20.0 and later, measurementId is optional
		const firebaseConfig = {
		apiKey: "AIzaSyCp6Q_j8massOsIuXXWhlMp1yuig5ebmjE",
		authDomain: "hospital-5f67e.firebaseapp.com",
		projectId: "hospital-5f67e",
		storageBucket: "hospital-5f67e.appspot.com",
		messagingSenderId: "1004398381726",
		appId: "1:1004398381726:web:e7c0f93f111a0d93ae898f",
		measurementId: "G-KGZ9K8SRR2"
		};
	
		// Initialize Firebase
		 const app = initializeApp(firebaseConfig);
		 const db = getFirestore();
		 const auth = getAuth();
		
		const fors=document.getElementById('form1');
		
		fors.addEventListener('submit', async (e) =>{
			 e.preventDefault()
		const usuario = fors['usuario'];
		const pass = fors['contra'];
		var us="";
		var corre="";
		var cont="";
		const q=query(collection(db,"Doctores"),where("usuario","==", usuario.value),where("contra","==",contra.value))
		const querySnapshot= await getDocs(q);
		querySnapshot.forEach((doc) =>{
		const  dat  =doc.data();
		 us=dat.usuario;
		 corre=dat.correo;
		 cont=dat.contra;
		});
		if(us!=""){
				signInWithEmailAndPassword(auth,corre,cont)
				.then( (userCredential) => {
				// Signed in
					
					const user = userCredential.user;
				// ...
				
				window.location.href = "./areaMedico.html";
				})
				.catch((error) => {
					const errorCode = error.code;
					const errorMessage = error.message;
					alert("Error al iniciar sesion");
				});
			
			
		}
		else{
			alert("Usuario o contraseña mal escrita");
		}
		});
		/*
		const logOut=document.getElementById("logOut");
	logOut.addEventListener('click',e=>{
	e.preventDefault();
	signOut(auth).then(() => {
	alert("sesion cerrada")
	});
	
	});
	*/
	</script>
</html>